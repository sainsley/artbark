<link href='http://fonts.googleapis.com/css?family=Cabin+Sketch' rel='stylesheet' type='text/css'>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ArtBark: Login</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="external_js/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <style type="text/css">
      /* Override some defaults */

      body {
        padding-top: 100px; 
      }


      /* The white background content wrapper */
      .content {
       
        padding: 20px;
        margin: 0 -20px; 
        -webkit-border-radius: 10px 10px 10px 10px;
           -moz-border-radius: 10px 10px 10px 10px;
                border-radius: 10px 10px 10px 10px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
           -moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                box-shadow: 0 1px 2px rgba(0,0,0,.15);
      }

    .login-form {
    margin-left: 65px;
    }
    </style>

</head>
<body>
  <div class="navbar navbar-inverse navbar-fixed-top">
		  <div class="navbar-inner">
			<div class="container-fluid">
	  <a class="brand" style="padding-top: 20px; font-size: 48px;">ArtBark</a>
	</div>
	</div>
</div>
  <div class="container">
    <div class="content hero-unit">
      <div class="row">
        <div class="login-form">
          <h2>Sign in</h2>
          <small id="loginInfo" class="muted"></small>
          <form action="">
            <fieldset>
              <div class="clearfix">
                <input id="inputLoginEmail" type="text" placeholder="Email address">
              </div>

              <button id="btnSignIn" class="btn btn-primary" type="button">Sign in</button>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
 
	
	<div class="nonCommenter">
	<br/>
	<h2>or</h2>
	<br/>
	</div>
	

    <div class="nonCommenter content hero-unit">
      <div class="row">
        <div class="login-form">
          <h2>I want to upload art</h2>
          <form action="">
            <fieldset>
              <div class="clearfix">
                <input id="inputGetStartedEmail" type="text" placeholder="Email address">
              </div>
              <button id="btnGetStarted" class="btn btn-primary" type="button">Get started</button>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div> <!-- /container -->
    <script src="external_js/jquery.js"></script>
	
    <script src="external_js/bootstrap/js/bootstrap.js"></script>
	<script>
		$.extend({
				getUrlVars : function() {
					var vars = [], hash;
					var hashes = window.location.href.slice(
							window.location.href.indexOf('?') + 1).split('&');
					for ( var i = 0; i < hashes.length; i++) {
						hash = hashes[i].split('=');
						vars.push(hash[0]);
						vars[hash[0]] = hash[1];
					}
					return vars;
				},
				getUrlVar : function(name) {
					return $.getUrlVars()[name];
				}
			});
			
			var userEmail;
      var userGroup;
      var artTitle;
      var artistEmail;
			
			function getSettingsFromUrl(){
				if($.getUrlVar('userEmail')) 
				{
					userEmail = $.getUrlVar('userEmail');
					//trialsPerUser = (parseInt($.getUrlVar('trialsPerUser')));
					
				}

				if($.getUrlVar('userGroup')) 
				{
					userGroup = $.getUrlVar('userGroup');
					//trialsPerUser = (parseInt($.getUrlVar('trialsPerUser')));
          for (var i=0; i<$(".nonCommenter").length;i++)
          {
            $(".nonCommenter")[i].style.display = "none";
          }
				


        if($.getUrlVar('artTitle')) 
        {
          artTitle = $.getUrlVar('artTitle');
        }
        else
        {
          artTitle = "Unknown Art"
        }

        if($.getUrlVar('artistEmail'))
        {
          artistEmail = $.getUrlVar('artistEmail');
        }
        else
        {
          artistEmail = "Unknown Artist"
        }

        $("#loginInfo")[0].innerHTML = "Sign in as a <strong>" + userGroup.substring(0,userGroup.length-1) + "</strong> to view " + artTitle + " by " + artistEmail;
}


        if(userEmail != null)
        {
          $("#inputLoginEmail")[0].value = userEmail;
        }
        

			};
			
			$(document).ready(function() {
				getSettingsFromUrl();
        $('.nav-tabs').button();


        signIn = function()
        {
                    userEmail = $("#inputLoginEmail")[0].value ;
         
          console.log(userEmail.length)
          console.log("trying to navigate")
          if(userEmail.length > 0)
          {
            console.log("navigating...");
            window.location.href = "index.html?artistEmail="+artistEmail+"&userEmail="+userEmail+"&userGroup="+userGroup;
          }
        }

        $("#btnSignIn").click(function(){
          signIn();
        });

        $("#inputLoginEmail").keyup(function (e) {
          if (e.keyCode == 13) {
              signIn();
          }
        });

        $("#inputLoginSessionId").keyup(function (e) {
          if (e.keyCode == 13) {
              signIn();
          }
        });


        getStarted = function()
        {
                   userEmail = $("#inputGetStartedEmail")[0].value ;
        
          console.log(userEmail.length)
          console.log("trying to navigate")
          if(userEmail.length > 0)
          {
            console.log("navigating...");
            window.location.href = "start.html?&userEmail="+userEmail;
          }
        }

        $("#btnGetStarted").click(function(){
          getStarted();
        });


$('#inputGetStartedEmail').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
        $("#inputGetStartedEmail").keyup(function (e) {
          if (e.keyCode == 13) {
              getStarted();
          }
        });

				
			});
	</script>
</body>
</html>